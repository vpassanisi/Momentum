(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e0db554"],{"0415":function(t,e,r){},7336:function(t,e,r){"use strict";r("0415")},8096:function(t,e,r){},"99ff":function(t,e,r){"use strict";var n=r("7a23"),o={ref:"container",class:"relative"};function i(t,e,r,i,s,a){return Object(n["r"])(),Object(n["e"])("div",o,[Object(n["i"])("div",{ref:"editor",innerHTML:r.value},null,8,["innerHTML"])],512)}var s=r("9339"),a=r.n(s),c=(r("a753"),r("8096"),{props:{value:{type:String,required:!0}},data:function(){return{editor:null}},mounted:function(){var t=this;this.editor=new a.a(this.$refs.editor,{bounds:this.$refs.container,theme:"bubble",readOnly:!0}),this.editor.root.innerHTML=this.value,this.editor.on("text-change",(function(){t.$emit("input",t.editor.root.innerHTML)}))}});r("7336");c.render=i;e["a"]=c},b3be:function(t,e,r){"use strict";r.r(e);r("b0c0"),r("4c53");var n=r("7a23"),o={key:0,class:"flex justify-center mt-32"},i={class:"grid gap-6 grid-cols-1 md:grid-cols-3 w-11/12 max-w-screen-lg"},s={class:"md:col-span-2 p-4 rounded bg-white dark:bg-dark-gray-800 shadow border border-gray-400 dark:border-gray-700 mb-12"},a={class:"flex flex-row"},c={class:"flex flex-col min-w-6"},d=Object(n["i"])("svg",{viewBox:"100 14.653 300 168.661",xmlns:"http://www.w3.org/2000/svg"},[Object(n["i"])("path",{fill:"currentColor",d:"M 379.784 183.315 L 120.215 183.315 C 102.241 183.315 93.24 161.772 105.949 149.173 L 235.734 20.511 C 243.613 12.701 256.387 12.701 264.265 20.511 L 394.05 149.173 C 406.76 161.772 397.758 183.315 379.784 183.315 Z",class:"",style:""})],-1),u={class:"w-full text-center"},l=Object(n["i"])("svg",{viewBox:"100 14.112 300 168.65",xmlns:"http://www.w3.org/2000/svg"},[Object(n["i"])("path",{fill:"currentColor",d:"M 120.186 14.112 L 379.814 14.112 C 397.775 14.112 406.756 35.612 394.042 48.212 L 264.278 176.912 C 256.408 184.712 243.593 184.712 235.722 176.912 L 105.958 48.212 C 93.244 35.612 102.225 14.112 120.186 14.112 Z",class:"",style:""})],-1),m={class:"text-sm text-gray-700 dark:text-gray-500 pl-4"},b={class:"text-xl font-medium pl-4"},p={class:"p-4"},h={class:"flex"},f=Object(n["i"])("div",{class:"border-b border-gray-400 dark:border-gray-700 my-4"},null,-1),v={class:"inline-block"},O={class:"flex flex-row justify-start rounded border border-gray-400 dark:border-gray-700 px-4 py-2 bg-blue-50 dark:bg-dark-gray-700 shadow"},j=Object(n["h"])(" Sort By: "),g=Object(n["i"])("option",{value:"points",class:"focus:outline-none"},"Top",-1),x=Object(n["i"])("option",{value:"createdAt",class:"focus:outline-none"},"New",-1),y={class:"flex flex-row items-center justify-center mt-4"};function w(t,e,r,w,k,C){var A=Object(n["z"])("read-only-editor"),$=Object(n["z"])("NewCommentEditor"),I=Object(n["z"])("comment-c"),M=Object(n["z"])("About");return t.post&&t.sub?(Object(n["r"])(),Object(n["e"])("div",o,[Object(n["i"])("div",i,[Object(n["i"])("div",s,[Object(n["i"])("div",a,[Object(n["i"])("div",c,[Object(n["i"])("button",{class:["w-full focus:outline-none py-2",[!0===t.isActive?"text-green-600 dark:text-green-500":"text-gray-900 dark:text-gray-400"]],onClick:e[1]||(e[1]=function(){return t.handleUp&&t.handleUp.apply(t,arguments)})},[d],2),Object(n["i"])("div",u,Object(n["B"])(t.post.points>999?"".concat((t.post.points/1e3).toPrecision(2),"k"):t.post.points),1),Object(n["i"])("button",{class:["w-full focus:outline-none py-2",[!1===t.isActive?"text-red-600 dark:text-red-500":"text-gray-900 dark:text-gray-400"]],onClick:e[2]||(e[2]=function(){return t.handleDown&&t.handleDown.apply(t,arguments)})},[l],2)]),Object(n["i"])("div",null,[Object(n["i"])("div",m," Posted by "+Object(n["B"])(t.post.user.name)+" • "+Object(n["B"])(t.formatedTime)+" ago ",1),Object(n["i"])("div",b,Object(n["B"])(t.post.title),1),Object(n["i"])("div",p,[Object(n["i"])(A,{value:t.post.body},null,8,["value"])])])]),Object(n["i"])("div",h,[Object(n["i"])($,{postId:t.post._id,parentId:t.post._id,rootId:"000000000000000000000000",closeButton:!1},null,8,["postId","parentId"])]),f,Object(n["i"])("div",v,[Object(n["i"])("div",O,[j,Object(n["I"])(Object(n["i"])("select",{name:"sort",class:"focus:outline-none ml-2 bg-transparent border-b border-gray-700 dark:border-gray-300","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.sort=e}),onChange:e[4]||(e[4]=function(){return t.handleChangeSort&&t.handleChangeSort.apply(t,arguments)})},[g,x],544),[[n["D"],t.sort]]),Object(n["i"])("button",{class:"flex ml-4 focus:outline-none",onClick:e[5]||(e[5]=function(){return t.handleOrder&&t.handleOrder.apply(t,arguments)})},[Object(n["i"])("i",{class:["material-icons transition-transform transform duration-300 ease-in-out",[1===t.order?"rotate-180":""]]},"south",2)])])]),(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(t.comments[t.post._id],(function(t){return Object(n["r"])(),Object(n["e"])(I,{key:t._id,comment:t,rootId:t._id},null,8,["comment","rootId"])})),128)),Object(n["i"])("div",y,[Object(n["I"])(Object(n["i"])("button",{class:"w-1/2 bg-blue-500 text-white shadow rounded p-2 focus:outline-none",onClick:e[6]||(e[6]=function(){return t.handleNextComments&&t.handleNextComments.apply(t,arguments)})}," Load More Comments ",512),[[n["F"],t.moreComments]])])]),Object(n["i"])(M,{class:"order-last"})])])):Object(n["f"])("",!0)}r("96cf");var k=r("1da1"),C=(r("99af"),{key:0,class:"flex flex-row py-4 w-full"}),A={class:"flex flex-col w-6"},$=Object(n["i"])("svg",{viewBox:"100 14.653 300 168.661",xmlns:"http://www.w3.org/2000/svg"},[Object(n["i"])("path",{fill:"currentColor",d:"M 379.784 183.315 L 120.215 183.315 C 102.241 183.315 93.24 161.772 105.949 149.173 L 235.734 20.511 C 243.613 12.701 256.387 12.701 264.265 20.511 L 394.05 149.173 C 406.76 161.772 397.758 183.315 379.784 183.315 Z",class:"",style:""})],-1),I=Object(n["i"])("svg",{viewBox:"100 14.112 300 168.65",xmlns:"http://www.w3.org/2000/svg"},[Object(n["i"])("path",{fill:"currentColor",d:"M 120.186 14.112 L 379.814 14.112 C 397.775 14.112 406.756 35.612 394.042 48.212 L 264.278 176.912 C 256.408 184.712 243.593 184.712 235.722 176.912 L 105.958 48.212 C 93.244 35.612 102.225 14.112 120.186 14.112 Z",class:"",style:""})],-1),M={class:"w-full"},D={class:"inline-block pl-4 text-sm text-gray-500"},R={key:0},L={key:0,class:"flex flex-row"},_=Object(n["i"])("div",{class:"flex flex-col min-w-6"},[Object(n["i"])("div",{class:"border-r-2 border-gray-300 dark:border-gray-700 w-1/2 h-full self-start"})],-1),P={key:1},B=Object(n["i"])("i",{class:"material-icons text-sm mr-2"},"chat_bubble",-1),T=Object(n["h"])(" Reply "),N={key:1},S={key:1,class:"flex flex-row items-center justify-start py-4"},V=Object(n["i"])("i",{class:"material-icons text-blue-700 dark:text-blue-100 text-3xl"},"add_circle",-1),E={class:"text-sm text-gray-500 flex items-center justify-center"};function U(t,e,r,o,i,s){var a=Object(n["z"])("read-only-editor"),c=Object(n["z"])("NewCommentEditor"),d=Object(n["z"])("_self");return t.isOpen?(Object(n["r"])(),Object(n["e"])("div",C,[Object(n["i"])("div",A,[Object(n["i"])("button",{class:["w-full focus:outline-none py-2",[!0===t.isActive?"text-green-600 dark:text-green-500":"text-gray-900 dark:text-gray-400"]],onClick:e[1]||(e[1]=function(){return t.handleUp&&t.handleUp.apply(t,arguments)})},[$],2),Object(n["i"])("button",{class:["w-full focus:outline-none py-2",[!1===t.isActive?"text-red-600 dark:text-red-500":"text-gray-900 dark:text-gray-400"]],onClick:e[2]||(e[2]=function(){return t.handleDown&&t.handleDown.apply(t,arguments)})},[I],2),Object(n["i"])("div",{class:"border-r-2 border-gray-300 dark:border-gray-700 hover:border-gray-700 w-1/2 h-full self-start cursor-pointer",onClick:e[3]||(e[3]=function(){return t.close&&t.close.apply(t,arguments)})})]),Object(n["i"])("div",M,[Object(n["i"])("span",D,Object(n["B"])("".concat(t.comment.user.name," • ").concat(t.comment.points," Points • ").concat(t.formatedTime," ago")),1),Object(n["i"])(a,{value:t.comment.body},null,8,["value"]),t.isAuthenticated?(Object(n["r"])(),Object(n["e"])("div",R,[t.isReplyOpen?(Object(n["r"])(),Object(n["e"])("div",L,[_,Object(n["i"])(c,{postId:t.comment.post,parentId:t.comment._id,rootId:t.rootId,closeButton:!0,onClose:t.closeReply},null,8,["postId","parentId","rootId","onClose"])])):(Object(n["r"])(),Object(n["e"])("span",P,[Object(n["i"])("button",{class:"flex items-center hover:bg-gray-200 rounded p-1 text-gray-500 text-sm focus:outline-none",onClick:e[4]||(e[4]=function(){return t.openReply&&t.openReply.apply(t,arguments)})},[B,T])]))])):Object(n["f"])("",!0),t.comments[t.comment._id].length>0?(Object(n["r"])(),Object(n["e"])("div",N,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(t.comments[t.comment._id],(function(e){return Object(n["r"])(),Object(n["e"])(d,{key:e._id,comment:e,rootId:t.rootId},null,8,["comment","rootId"])})),128))])):Object(n["f"])("",!0)])])):(Object(n["r"])(),Object(n["e"])("div",S,[Object(n["i"])("button",{onClick:e[5]||(e[5]=function(){return t.open&&t.open.apply(t,arguments)}),class:"flex pr-3"},[V]),Object(n["i"])("span",E,Object(n["B"])("".concat(t.comment.user.name," • ").concat(t.comment.points," Points • ").concat(t.formatedTime," ago")),1)]))}var z={key:0,class:"relative w-full"},q={class:"dark:text-gray-400 text-gray-500"},H={ref:"newCommentContainer",class:"mt-2"},Z={ref:"newCommentEditor",style:{"min-height":"10rem"}},G={class:"flex items-center justify-between border-l border-r border-b border-gray-400 p-1"},J=Object(n["i"])("i",{class:"material-icons"},"clear",-1),F={key:1,class:"flex flex-wrap justify-between rounded border border-gray-400 dark:border-gray-700 p-4 bg-blue-50 dark:bg-dark-gray-700 shadow"},K=Object(n["i"])("div",{class:"flex items-center justify-center font-medium text-center pb-4 md:pt-4 w-full md:w-auto"}," Log in or sign up to leave a comment ",-1),Q={class:"flex items-center justify-center w-full md:w-auto"},W=Object(n["i"])("button",{class:"rounded shadow px-4 py-2 mx-2 bg-blue-100 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-400 border border-blue-500 transition-button duration-300 ease-in-out focus:outline-none"}," SIGN UP ",-1);function X(t,e,r,o,i,s){return t.isAuthenticated?(Object(n["r"])(),Object(n["e"])("div",z,[Object(n["i"])("small",q,"comment as "+Object(n["B"])(t.name),1),Object(n["i"])("div",H,[Object(n["i"])("div",Z,null,512),Object(n["i"])("div",G,[Object(n["i"])("button",{class:"bg-blue-100 dark:bg-blue-400 px-4 py-1 rounded",onClick:e[1]||(e[1]=function(){return t.handleComment&&t.handleComment.apply(t,arguments)})}," comment "),t.closeButton?(Object(n["r"])(),Object(n["e"])("button",{key:0,class:"flex",onClick:e[2]||(e[2]=function(){return t.close&&t.close.apply(t,arguments)})},[J])):Object(n["f"])("",!0)])],512)])):(Object(n["r"])(),Object(n["e"])("div",F,[K,Object(n["i"])("div",Q,[Object(n["i"])("button",{class:"rounded shadow px-4 py-2 mx-2 hover:bg-blue-100 dark:hover:bg-blue-500 border border-blue-500 transition-button duration-300 ease-in-out focus:outline-none",onClick:e[3]||(e[3]=function(){return t.openLoginModal&&t.openLoginModal.apply(t,arguments)})}," LOG IN "),W])]))}var Y=r("9339"),tt=r.n(Y),et=(r("a753"),r("8096"),Object(n["j"])({name:"NewCommentEditor",props:{postId:{type:String,required:!0},parentId:{type:String,required:!0},rootId:{type:String,required:!0},closeButton:Boolean},data:function(){return{editor:null,body:""}},computed:{isAuthenticated:function(){return this.$store.direct.state.AuthMod.isAuthenticated},name:function(){return this.$store.direct.state.AuthMod.name}},methods:{openLoginModal:function(){this.$store.direct.commit.openLoginModal()},handleComment:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.direct.dispatch.DataMod.newComment({postID:t.postId,body:t.body,parentID:t.parentId,rootID:t.rootId});case 2:t.$emit("close");case 3:case"end":return e.stop()}}),e)})))()},close:function(){this.$emit("close")}},mounted:function(){var t=this;this.$refs.newCommentEditor&&(this.editor=new tt.a(this.$refs.newCommentEditor,{bounds:this.$refs.newCommentContainer,theme:"snow",readOnly:!1,placeholder:". . ."}),this.editor.on("text-change",(function(){t.editor&&(t.body=t.editor.root.innerHTML)})))}}));et.render=X;var rt=et,nt=r("99ff"),ot=Object(n["j"])({name:"Comment",components:{NewCommentEditor:rt,ReadOnlyEditor:nt["a"]},props:{comment:{type:Object,required:!0},rootId:String},data:function(){return{isActive:void 0,formatedTime:null,isReplyOpen:!1,isOpen:!0}},computed:{isAuthenticated:function(){return this.$store.direct.state.AuthMod.isAuthenticated},points:function(){return this.$store.direct.state.PointMod.points},comments:function(){var t,e,r,n;return null!==(t=null===(e=this.$store.direct.state.DataMod.subs[0])||void 0===e||null===(r=e.posts)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.commentsMap)&&void 0!==t?t:{}}},methods:{close:function(){this.isOpen=!1},open:function(){this.isOpen=!0},openReply:function(){this.isReplyOpen=!0},closeReply:function(){this.isReplyOpen=!1},handleUp:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:if(!0!==t.isActive){e.next=8;break}return t.isActive=void 0,e.next=6,t.$store.direct.dispatch.removeCommentPoint(t.comment._id);case 6:e.next=11;break;case 8:return t.isActive=!0,e.next=11,t.$store.direct.dispatch.incrementComment(t.comment._id);case 11:case"end":return e.stop()}}),e)})))()},handleDown:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:if(!1!==t.isActive){e.next=8;break}return t.isActive=void 0,e.next=6,t.$store.direct.dispatch.removeCommentPoint(t.comment._id);case 6:e.next=11;break;case 8:return t.isActive=!1,e.next=11,t.$store.direct.dispatch.decrementComment(t.comment._id);case 11:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.direct.dispatch.getTimeSince(this.comment.createdAt);case 2:this.formatedTime=t.sent,this.isActive=this.points[this.comment._id];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{points:function(){this.isActive=this.points[this.comment._id]}}});ot.render=U;var it=ot,st=r("84ba"),at=Object(n["j"])({name:"Thread",components:{About:st["a"],CommentC:it,ReadOnlyEditor:nt["a"],NewCommentEditor:rt},data:function(){return{sort:"points",order:-1,isActive:void 0,formatedTime:null}},computed:{lastValueCreatedAt:function(){return this.$store.direct.getters.DataMod.lastValueCreatedAt},lastValuePoints:function(){return this.$store.direct.getters.DataMod.lastValuePoints},post:function(){var t,e,r;return null===(t=this.$store.direct.state.DataMod.subs)||void 0===t||null===(e=t[0])||void 0===e||null===(r=e.posts)||void 0===r?void 0:r[0]},moreComments:function(){return this.$store.direct.state.DataMod.moreComments},comments:function(){var t,e,r,n,o;return null!==(t=null===(e=this.$store.direct.state.DataMod.subs)||void 0===e||null===(r=e[0])||void 0===r||null===(n=r.posts)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.commentsMap)&&void 0!==t?t:{}},points:function(){return this.$store.direct.state.PointMod.points},targetIDs:function(){return this.$store.direct.getters.DataMod.targetIDs},sub:function(){var t;return null===(t=this.$store.direct.state.DataMod.subs)||void 0===t?void 0:t[0]},isAuthenticated:function(){return this.$store.direct.state.AuthMod.isAuthenticated}},methods:{handleUp:function(){this.isAuthenticated&&this.post&&(!0===this.isActive?(this.isActive=void 0,this.$store.direct.dispatch.removePostPoint(this.post._id)):(this.isActive=!0,this.$store.direct.dispatch.incrementPost(this.post._id)))},handleDown:function(){this.isAuthenticated&&this.post&&(!1===this.isActive?(this.isActive=void 0,this.$store.direct.dispatch.removePostPoint(this.post._id)):(this.isActive=!1,this.$store.direct.dispatch.decrementPost(this.post._id)))},handleChangeSort:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.direct.dispatch.DataMod.threadInit({subName:t.$route.params.sub,postID:t.$route.params.id,sortBy:t.sort,order:t.order,lastValue:0,lastCreatedAt:0});case 2:if(!t.isAuthenticated){e.next=5;break}return e.next=5,t.$store.direct.dispatch.getPoints(t.targetIDs);case 5:case"end":return e.stop()}}),e)})))()},handleOrder:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.order=1===t.order?-1:1,e.next=3,t.$store.direct.dispatch.DataMod.threadInit({subName:t.$route.params.sub,postID:t.$route.params.id,sortBy:t.sort,order:t.order,lastValue:0,lastCreatedAt:0});case 3:if(!t.isAuthenticated){e.next=6;break}return e.next=6,t.$store.direct.dispatch.getPoints(t.targetIDs);case 6:case"end":return e.stop()}}),e)})))()},handleNextComments:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.direct.dispatch.DataMod.loadMoreComments({subName:t.$route.params.sub,postID:t.$route.params.id,sortBy:t.sort,order:t.order,lastValue:"points"===t.sort?t.lastValuePoints:t.lastValueCreatedAt,lastCreatedAt:t.$store.direct.getters.DataMod.lastValueCreatedAt});case 2:if(!t.isAuthenticated){e.next=5;break}return e.next=5,t.$store.direct.dispatch.getPoints(t.targetIDs);case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.direct.dispatch.DataMod.threadInit({subName:this.$route.params.sub,postID:this.$route.params.id,sortBy:this.sort,order:this.order,lastValue:0,lastCreatedAt:0});case 2:if(!this.isAuthenticated){t.next=5;break}return t.next=5,this.$store.direct.dispatch.getPoints(this.targetIDs);case 5:if(!this.post){t.next=10;break}return this.isActive=this.points[this.post._id],t.next=9,this.$store.direct.dispatch.getTimeSince(this.post.createdAt);case 9:this.formatedTime=t.sent;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{points:function(){this.post&&(this.isActive=this.points[this.post._id])}},beforeUnmount:function(){this.$store.direct.commit.DataMod.clearDataState(),this.$store.direct.commit.clearPointState()}});at.render=w;e["default"]=at}}]);
//# sourceMappingURL=chunk-2e0db554.b613bbb9.js.map